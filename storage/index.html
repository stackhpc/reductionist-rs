
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://stackhpc.github.io/reductionist-rs/storage/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Storage - Reductionist</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#ef5552">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Reductionist" class="md-header__button md-logo" aria-label="Reductionist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Reductionist
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stackhpc/reductionist-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Reductionist" class="md-nav__button md-logo" aria-label="Reductionist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Reductionist
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stackhpc/reductionist-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pyactivestorage/" class="md-nav__link">
        PyActiveStorage Integration
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scripts-for-starting-local-storage" class="md-nav__link">
    Scripts for starting local storage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-minio-for-local-s3-storage" class="md-nav__link">
    Using Minio for local S3 storage
  </a>
  
    <nav class="md-nav" aria-label="Using Minio for local S3 storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-minio" class="md-nav__link">
    Starting Minio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-minio" class="md-nav__link">
    Stopping Minio
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-nginx-for-local-http-https-storage" class="md-nav__link">
    Using nginx for local HTTP / HTTPS storage
  </a>
  
    <nav class="md-nav" aria-label="Using nginx for local HTTP / HTTPS storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-nginx-without-tls-certificates" class="md-nav__link">
    Starting nginx without TLS certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-nginx" class="md-nav__link">
    Stopping nginx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-nginx-with-tls-certificates" class="md-nav__link">
    Starting nginx with TLS certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    Authentication
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-authentication-for-all-access" class="md-nav__link">
    Enabling authentication for all access
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#username-and-password-used-for-authentication" class="md-nav__link">
    Username and password used for authentication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts-used-by-cicd" class="md-nav__link">
    Scripts used by CI/CD
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/stackhpc/reductionist-rs/edit/master/docs/storage.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">&para;</a></h1>
<p>The Reductionist supports access to both S3 and HTTP object stores. Scripts are provided with the source code to allow running local stores, which is particularly useful for testing.</p>
<h2 id="scripts-for-starting-local-storage">Scripts for starting local storage<a class="headerlink" href="#scripts-for-starting-local-storage" title="Permanent link">&para;</a></h2>
<p>All of the following scripts launch local storage using either <a href="https://github.com/minio/minio">Minio</a> for S3 or <a href="https://nginx.org/">nginx</a> for HTTP/HTTPS.</p>
<p>An easy way to manage containers as an unprivileged user is through <a href="https://podman.io/">Podman</a>.</p>
<p>The <code>podman-docker</code> package can be installed on <code>DEB</code> and <code>RPM</code> based systems. It provides a <code>docker</code> like interface which is used by the following scripts.</p>
<table>
<thead>
<tr>
<th>Script</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>scripts/minio-start</td>
<td>Starts a local Minio container for user-managed S3 storage</td>
</tr>
<tr>
<td>scripts/minio-stop</td>
<td>Stops the locally started Minio container</td>
</tr>
<tr>
<td>scripts/nginx-start</td>
<td>Starts a local nginx container for user-managed HTTP storage</td>
</tr>
<tr>
<td>scripts/nginx-ssl-start</td>
<td>Starts a local nginx container for user-managed HTTPS storage</td>
</tr>
<tr>
<td></td>
<td>using user provided TLS certificates</td>
</tr>
<tr>
<td>scripts/nginx-stop</td>
<td>Stops the locally started nginx container</td>
</tr>
<tr>
<td>scripts/storage-start</td>
<td>Starts both local Minio and nginx containers for CI/CD</td>
</tr>
<tr>
<td>scripts/storage-stop</td>
<td>Stops both locally started Minio and nginx containers</td>
</tr>
</tbody>
</table>
<h2 id="using-minio-for-local-s3-storage">Using Minio for local S3 storage<a class="headerlink" href="#using-minio-for-local-s3-storage" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/minio/minio">Minio</a> provides S3-compatible storage, the following scripts allow an existing directory to be used for the storage of Minio exported objects.</p>
<p>Minio stores objects locally in its own file format so the local directory is best populated via Minio's S3 API, but from a test perspective these scripts are useful for persisting a Minio based object store between container restarts. The contents of the existing directory will not be wiped.</p>
<h3 id="starting-minio">Starting Minio<a class="headerlink" href="#starting-minio" title="Permanent link">&para;</a></h3>
<p>Checkout the Reductionist source and start Minio as follows:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/stackhpc/reductionist-rs.git
<span class="nb">cd</span><span class="w"> </span>reductionist-rs
./scripts/minio-start<span class="w"> </span>&lt;/path/to/persistent/storage/directory&gt;
</code></pre></div>
<p>The directory <code>/path/to/persistent/storage/directory</code> must already exist and either be empty or contain files previously created by Minio.</p>
<p>The script starts a detached Minio container, downloading a Minio image if not already downloaded.</p>
<p>The container runs with name <code>minio-user-share</code>.</p>
<p>Minio's S3 API is accessible on port 9000.</p>
<p>Minio's web console is accessible on port 9001.</p>
<h3 id="stopping-minio">Stopping Minio<a class="headerlink" href="#stopping-minio" title="Permanent link">&para;</a></h3>
<p>Stop Minio as follows, the script assumes Minio was started with the above script:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/path/to/reductionist-rs
./scripts/minio-stop
</code></pre></div>
<h2 id="using-nginx-for-local-http-https-storage">Using nginx for local HTTP / HTTPS storage<a class="headerlink" href="#using-nginx-for-local-http-https-storage" title="Permanent link">&para;</a></h2>
<p><a href="https://nginx.org/">nginx</a> provides HTTP storage, the following scripts allow an existing directory to be used for the storage of objects.</p>
<p>nginx is simply allowing the underlying filesystem to be accessed via HTTP and/or HTTPS.</p>
<p>This is particularly useful for making existing object filestores accessible to the Reductionist without having to worry about file permissions - if the user running podman can access these files they can be made available to the Reductionist.</p>
<p>The included <code>nginx.conf</code> has a few useful features, mainly geared towards Reductionist testing of authenticated and unauthenticated access with and without TLS certificates:</p>
<table>
<thead>
<tr>
<th>Address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>http://localhost:8000</td>
<td>HTTP access to the exported directory</td>
</tr>
<tr>
<td>http://localhost:8000/private</td>
<td>Authenticated HTTP access to the exported directory</td>
</tr>
<tr>
<td>http://localhost:8000/upload</td>
<td>HTTP PUT write access to the exported directory</td>
</tr>
<tr>
<td></td>
<td>allowing for example CI/CD to test Reductionist's HTTP object store</td>
</tr>
<tr>
<td>http://localhost:8000/private/upload</td>
<td>Authenticated HTTP PUT write access to the exported directory</td>
</tr>
<tr>
<td></td>
<td>allowing for example CI/CD to test Reductionist's HTTP object store</td>
</tr>
</tbody>
</table>
<p>An additional <code>nginx-ssl.conf</code> and accompanying script allow HTTPS using user provided TLS certificates:</p>
<table>
<thead>
<tr>
<th>Address</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>https://localhost:8000</td>
<td>HTTPS access to the exported directory</td>
</tr>
<tr>
<td>https://localhost:8000/private</td>
<td>Authenticated HTTPS access to the exported directory</td>
</tr>
<tr>
<td>https://localhost:8000/upload</td>
<td>HTTPS PUT write access to the exported directory</td>
</tr>
<tr>
<td></td>
<td>allowing for example CI/CD to test Reductionist's HTTPS object store</td>
</tr>
<tr>
<td>https://localhost:8000/private/upload</td>
<td>Authenticated HTTPS PUT write access to the exported directory</td>
</tr>
<tr>
<td></td>
<td>allowing for example CI/CD to test Reductionist's HTTPS object store</td>
</tr>
</tbody>
</table>
<p>With the default configuration it's possible to test both authenticated and unauthenticated access to the same location.</p>
<p>This is not very useful from the perspective of securing existing files we want to make accessible to the Reductionist, see the later section on <a href="#authentication">Authentication</a></p>
<h3 id="starting-nginx-without-tls-certificates">Starting nginx without TLS certificates<a class="headerlink" href="#starting-nginx-without-tls-certificates" title="Permanent link">&para;</a></h3>
<p>Checkout the Reductionist source and start nginx as follows:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/stackhpc/reductionist-rs.git
<span class="nb">cd</span><span class="w"> </span>reductionist-rs
./scripts/nginx-start<span class="w"> </span>&lt;/path/to/persistent/storage/directory&gt;
</code></pre></div>
<p>The directory <code>/path/to/persistent/storage/directory</code> must already exist, anything it contains is accessible via nginx.</p>
<p>The script starts a detached nginx container, downloading an nginx image if not already downloaded.</p>
<p>The container runs with name <code>nginx-user-share</code>.</p>
<p>nginx is accessible using HTTP on port 8000.</p>
<h3 id="stopping-nginx">Stopping nginx<a class="headerlink" href="#stopping-nginx" title="Permanent link">&para;</a></h3>
<p>Stop nginx as follows, the script assumes nginx was started with the above script:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/path/to/reductionist-rs
./scripts/nginx-stop
</code></pre></div>
<h3 id="starting-nginx-with-tls-certificates">Starting nginx with TLS certificates<a class="headerlink" href="#starting-nginx-with-tls-certificates" title="Permanent link">&para;</a></h3>
<p>Checkout the Reductionist source as follows:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/stackhpc/reductionist-rs.git
</code></pre></div>
<p>Edit the script <code>/path/to/reductionist-rs/scripts/nginx-ssl-start</code> in the section:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This could do with better configuration,</span>
<span class="c1"># but to work around permission issues these certificates will be copied</span>
<span class="c1"># to a path that can be made accessible within the nginx container.</span>
<span class="nv">server_crt</span><span class="o">=</span><span class="s2">&quot;/etc/ssl/default/chain.crt&quot;</span>
<span class="nv">server_key</span><span class="o">=</span><span class="s2">&quot;/etc/ssl/default/server.key&quot;</span>
</code></pre></div>
<ul>
<li><code>server_crt</code> - The path to the full TLS certificate chain</li>
<li><code>server_key</code> - The path to the TLS certificate private key</li>
</ul>
<p>Often systems under <code>/etc/ssl</code> utilise symbolic links so the script copies them locally to ensure they can be easily volume mounted by the nginx container.</p>
<p>The certificate files referenced need to be readable by the user and the local copies are excluded from version control.</p>
<p>Once edited start nginx as follows:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/path/to/reductionist-rs
./scripts/nginx-ssl-start<span class="w"> </span>&lt;/path/to/persistent/storage/directory&gt;
</code></pre></div>
<p>To stop nginx use the same stop script previously documented above.</p>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h3>
<p>With the default nginx configuration it's possible to test both authenticated and unauthenticated access to the same location, but this is not very useful from the perspective of securing existing files we want to make accessible to the Reductionist.</p>
<h4 id="enabling-authentication-for-all-access">Enabling authentication for all access<a class="headerlink" href="#enabling-authentication-for-all-access" title="Permanent link">&para;</a></h4>
<p>To enable a completely secured server:</p>
<ul>
<li>for HTTP edit <code>/path/to/reductionist-rs/scripts/nginx.conf</code></li>
<li>for HTTPS edit <code>/path/to/reductionist-rs/scripts/nginx-ssl.conf</code></li>
</ul>
<p>Look for and uncomment the two <code>auth_basic</code> lines:</p>
<div class="highlight"><pre><span></span><code># Uncomment to require authentication for all access
auth_basic &quot;Access Restricted&quot;;
auth_basic_user_file /etc/nginx/htpasswd;
</code></pre></div>
<h4 id="username-and-password-used-for-authentication">Username and password used for authentication<a class="headerlink" href="#username-and-password-used-for-authentication" title="Permanent link">&para;</a></h4>
<p>A <code>htpasswd</code> file is created by the <code>nginx-start</code> and <code>nginx-ssl-start</code> scripts, the resulting <code>htpasswd</code> file is then volume mounted within the nginx container.</p>
<p>The <code>htpasswd</code> file is excluded from version control as credentials committed this way are generally flagged as a security risk.</p>
<p>The default credentials are:</p>
<ul>
<li><em>username</em> : <strong>admin</strong></li>
<li><em>password</em> : <strong>admin</strong></li>
</ul>
<p>To change the credentials:</p>
<ul>
<li>edit <code>/path/to/reductionist-rs/scripts/nginx-start</code> if using the HTTP server</li>
<li>edit <code>/path/to/reductionist-rs/scripts/nginx-ssl-start</code> if using the HTTPS server</li>
</ul>
<p>Edit the <code>htpasswd</code> line:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Setup htpasswd for basic authentication.</span>
<span class="c1"># NOTE: Do NOT commit generated htpasswd contents to version control,</span>
<span class="c1">#       it will be ignored using the following default location.</span>
<span class="c1"># To change the credentials used:</span>
<span class="c1"># - replace: admin admin</span>
<span class="c1"># - with   : &lt;your desired username&gt; &lt;your desired password&gt;</span>
htpasswd<span class="w"> </span>-bc<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$origin</span><span class="s2">/htpasswd&quot;</span><span class="w"> </span>admin<span class="w"> </span>admin
</code></pre></div>
<h2 id="scripts-used-by-cicd">Scripts used by CI/CD<a class="headerlink" href="#scripts-used-by-cicd" title="Permanent link">&para;</a></h2>
<p>Two additional scripts are provided that start both Minio and nginx for use in CI/CD.</p>
<ul>
<li><code>scripts/storage-start</code> - Starts Minio for S3 and nginx for HTTP storage</li>
<li><code>scripts/storage-stop</code> - Stops Minio and nginx</li>
</ul>
<p>The scripts manage containers using names <code>minio</code> and <code>nginx</code> respectively.</p>
<p>The services will be using the same ports as configured in the other scripts above but unlike those scripts <strong>all storage used by these containers is temporary</strong>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>