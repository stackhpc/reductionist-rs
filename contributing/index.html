
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://stackhpc.github.io/reductionist-rs/contributing/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>Contributing - Reductionist</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#ef5552">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contributing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Reductionist" class="md-header__button md-logo" aria-label="Reductionist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Reductionist
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contributing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stackhpc/reductionist-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Reductionist" class="md-nav__button md-logo" aria-label="Reductionist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Reductionist
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stackhpc/reductionist-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Contributing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-of-reductionist" class="md-nav__link">
    Testing of Reductionist
  </a>
  
    <nav class="md-nav" aria-label="Testing of Reductionist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#continuous-integration-ci" class="md-nav__link">
    Continuous Integration (CI)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complianceintegration-tests" class="md-nav__link">
    Compliance/integration tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-style" class="md-nav__link">
    Code style
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linting" class="md-nav__link">
    Linting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    Unit tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    Benchmarks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-commit-hook" class="md-nav__link">
    Pre-commit hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-environment" class="md-nav__link">
    Development environment
  </a>
  
    <nav class="md-nav" aria-label="Development environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-in-a-container" class="md-nav__link">
    Running in a container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-container-image" class="md-nav__link">
    Building a container image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-reductionist-binary" class="md-nav__link">
    Building a Reductionist binary
  </a>
  
    <nav class="md-nav" aria-label="Building a Reductionist binary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-and-run-reductionist" class="md-nav__link">
    Build and run Reductionist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-minio-object-storage" class="md-nav__link">
    Deploy Minio object storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-some-test-data" class="md-nav__link">
    Upload some test data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-test-suite" class="md-nav__link">
    Compliance test suite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-requests-to-active-storage-endpoints" class="md-nav__link">
    Making requests to active storage endpoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
    <nav class="md-nav" aria-label="Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-documentation" class="md-nav__link">
    Application documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-code-documentation" class="md-nav__link">
    Source code documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance" class="md-nav__link">
    Maintenance
  </a>
  
    <nav class="md-nav" aria-label="Maintenance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-dependencies" class="md-nav__link">
    Updating dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-minimum-supported-rust-version-msrv" class="md-nav__link">
    Updating Minimum Supported Rust Version (MSRV)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-release" class="md-nav__link">
    Create a release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pyactivestorage/" class="md-nav__link">
        PyActiveStorage Integration
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testing-of-reductionist" class="md-nav__link">
    Testing of Reductionist
  </a>
  
    <nav class="md-nav" aria-label="Testing of Reductionist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#continuous-integration-ci" class="md-nav__link">
    Continuous Integration (CI)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complianceintegration-tests" class="md-nav__link">
    Compliance/integration tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-style" class="md-nav__link">
    Code style
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linting" class="md-nav__link">
    Linting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    Unit tests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    Benchmarks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-commit-hook" class="md-nav__link">
    Pre-commit hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-environment" class="md-nav__link">
    Development environment
  </a>
  
    <nav class="md-nav" aria-label="Development environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-in-a-container" class="md-nav__link">
    Running in a container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-container-image" class="md-nav__link">
    Building a container image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-a-reductionist-binary" class="md-nav__link">
    Building a Reductionist binary
  </a>
  
    <nav class="md-nav" aria-label="Building a Reductionist binary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-and-run-reductionist" class="md-nav__link">
    Build and run Reductionist
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploy-minio-object-storage" class="md-nav__link">
    Deploy Minio object storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-some-test-data" class="md-nav__link">
    Upload some test data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-test-suite" class="md-nav__link">
    Compliance test suite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-requests-to-active-storage-endpoints" class="md-nav__link">
    Making requests to active storage endpoints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
    <nav class="md-nav" aria-label="Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-documentation" class="md-nav__link">
    Application documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source-code-documentation" class="md-nav__link">
    Source code documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance" class="md-nav__link">
    Maintenance
  </a>
  
    <nav class="md-nav" aria-label="Maintenance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#updating-dependencies" class="md-nav__link">
    Updating dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-minimum-supported-rust-version-msrv" class="md-nav__link">
    Updating Minimum Supported Rust Version (MSRV)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-release" class="md-nav__link">
    Create a release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/stackhpc/reductionist-rs/edit/master/docs/contributing.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h1>
<h2 id="testing-of-reductionist">Testing of Reductionist<a class="headerlink" href="#testing-of-reductionist" title="Permanent link">&para;</a></h2>
<p>Reductionist is tested at various levels.</p>
<h3 id="continuous-integration-ci">Continuous Integration (CI)<a class="headerlink" href="#continuous-integration-ci" title="Permanent link">&para;</a></h3>
<p>GitHub Actions is used for CI for pull requests.
It checks that the package builds, and passes various checks, unit and integration tests.</p>
<h3 id="complianceintegration-tests">Compliance/integration tests<a class="headerlink" href="#complianceintegration-tests" title="Permanent link">&para;</a></h3>
<p>The <a href="https://github.com/stackhpc/s3-active-storage-compliance-suite/">S3 Active Storage compliance test suite</a> should be updated to test any new features added to Reductionist.</p>
<h3 id="code-style">Code style<a class="headerlink" href="#code-style" title="Permanent link">&para;</a></h3>
<p>Rust code style is enforced using <code>cargo fmt</code>.
This command will modify the source code to resolve any code style issues.
To check for code style issues without making changes, use <code>cargo fmt -- --check</code>.</p>
<h3 id="linting">Linting<a class="headerlink" href="#linting" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/rust-lang/rust-clippy">Clippy</a> is used to lint the source code.
Use <code>cargo clippy --all-targets -- -D warnings</code>.</p>
<h3 id="unit-tests">Unit tests<a class="headerlink" href="#unit-tests" title="Permanent link">&para;</a></h3>
<p>A majority of the application code in Reductionist is unit tested, and any new code should include unit tests where practical.
Unit tests in Rust code typically reside in the same file as the module being tested.
Unit tests can be run using <code>cargo test</code>.</p>
<h3 id="benchmarks">Benchmarks<a class="headerlink" href="#benchmarks" title="Permanent link">&para;</a></h3>
<p>Benchmark tests in the <code>benches</code> directory were created for various modules and used to make performance improvements.
These can be run using <code>cargo bench</code>, or a specific benchmark with <code>cargo bench --bench &lt;benchmark name&gt;</code></p>
<h2 id="pre-commit-hook">Pre-commit hook<a class="headerlink" href="#pre-commit-hook" title="Permanent link">&para;</a></h2>
<p>A pre-commit hook is provided in <code>tools/pre-commit</code> that runs formatting, clippy, and unit tests. After cloning this repository, copy it to <code>.git/hooks/pre-commit</code>.</p>
<h2 id="development-environment">Development environment<a class="headerlink" href="#development-environment" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For production deployments Reductionist provides an Ansible playbook to easily deploy it and supporting services to one or more hosts. See the <a href="../deployment/">deployment guide</a> for details.</p>
</div>
<p>There are various ways to run the Reductionist server for development purposes.</p>
<h3 id="running-in-a-container">Running in a container<a class="headerlink" href="#running-in-a-container" title="Permanent link">&para;</a></h3>
<p>The simplest method is to run it in a container using a pre-built image:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--detach<span class="w"> </span>--rm<span class="w"> </span>--net<span class="o">=</span>host<span class="w"> </span>--name<span class="w"> </span>reductionist<span class="w"> </span>ghcr.io/stackhpc/reductionist-rs:latest
</code></pre></div>
<p>Images are published to <a href="https://github.com/stackhpc/reductionist-rs/pkgs/container/reductionist-rs">GitHub Container Registry</a> when the project is released.
The <code>latest</code> tag corresponds to the most recent release, or you can use a specific release e.g. <code>0.1.0</code>.</p>
<p>This method does not require access to the source code.</p>
<h3 id="building-a-container-image">Building a container image<a class="headerlink" href="#building-a-container-image" title="Permanent link">&para;</a></h3>
<p>If you need to use unreleased changes, but still want to run in a container, it is possible to build an image.
First, clone this repository:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/stackhpc/reductionist-rs.git
<span class="nb">cd</span><span class="w"> </span>reductionist-rs
</code></pre></div>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>build
</code></pre></div>
<p>The image will be tagged as <code>reductionist</code>.
The image may be pushed to a registry, or deployed locally.</p>
<div class="highlight"><pre><span></span><code>make<span class="w"> </span>run
</code></pre></div>
<h3 id="building-a-reductionist-binary">Building a Reductionist binary<a class="headerlink" href="#building-a-reductionist-binary" title="Permanent link">&para;</a></h3>
<p>If you prefer not to run the Reductionist server in a container, it will be necessary to build a binary.
Building locally may also be preferable during development to take advantage of incremental compilation.</p>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h4>
<p>This project is written in Rust, and as such requires a Rust toolchain to be installed in order to build it.
The Minimum Supported Rust Version (MSRV) is 1.78.0, due to a dependency on the <a href="https://github.com/awslabs/aws-sdk-rust">AWS SDK</a>.
It may be necessary to use <a href="https://rustup.rs/">rustup</a> rather than the OS provided Rust toolchain to meet this requirement.
See the <a href="https://doc.rust-lang.org/book/ch01-01-installation.html">Rust book</a> for toolchain installation.</p>
<h4 id="build-and-run-reductionist">Build and run Reductionist<a class="headerlink" href="#build-and-run-reductionist" title="Permanent link">&para;</a></h4>
<p>First, clone this repository:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/stackhpc/reductionist-rs.git
<span class="nb">cd</span><span class="w"> </span>reductionist-rs
</code></pre></div>
<p>Next, use Cargo to build the package:</p>
<div class="highlight"><pre><span></span><code>cargo<span class="w"> </span>build<span class="w"> </span>--release
</code></pre></div>
<p>The active storage server may be run using Cargo:</p>
<div class="highlight"><pre><span></span><code>cargo<span class="w"> </span>run<span class="w"> </span>--release
</code></pre></div>
<p>Or installed to the system:</p>
<div class="highlight"><pre><span></span><code>cargo<span class="w"> </span>install<span class="w"> </span>--path<span class="w"> </span>.<span class="w"> </span>--locked
</code></pre></div>
<p>Then run:</p>
<div class="highlight"><pre><span></span><code>reductionist
</code></pre></div>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<p>For simple testing purposes Minio is a convenient object storage server.</p>
<p>As the Reductionist has been extended to support HTTP object store scripts are provided to start and stop container implementations of these stores, used within CI/CD.</p>
<h3 id="deploy-minio-object-storage">Deploy Minio object storage<a class="headerlink" href="#deploy-minio-object-storage" title="Permanent link">&para;</a></h3>
<p>Start a local <a href="https://min.io/">Minio</a> server which serves the test data:</p>
<div class="highlight"><pre><span></span><code>./scripts/storage-start
</code></pre></div>
<p>The Minio server will run in a detached container and may be stopped:</p>
<div class="highlight"><pre><span></span><code>./scripts/storage-stop
</code></pre></div>
<p>Note that object data is not preserved when the container is stopped.</p>
<h3 id="upload-some-test-data">Upload some test data<a class="headerlink" href="#upload-some-test-data" title="Permanent link">&para;</a></h3>
<p>A script is provided to upload some test data to minio.
In a separate terminal, set up the Python virtualenv then upload some sample data:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a virtualenv</span>
python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>./venv
<span class="c1"># Activate the virtualenv</span>
<span class="nb">source</span><span class="w"> </span>./venv/bin/activate
<span class="c1"># Install dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>scripts/requirements.txt
<span class="c1"># Upload some sample data to the running minio server</span>
python<span class="w"> </span>./scripts/upload_sample_data.py
</code></pre></div>
<h3 id="compliance-test-suite">Compliance test suite<a class="headerlink" href="#compliance-test-suite" title="Permanent link">&para;</a></h3>
<p>Proxy functionality can be tested using the <a href="https://github.com/stackhpc/s3-active-storage-compliance-suite">S3 active storage compliance suite</a>.</p>
<h3 id="making-requests-to-active-storage-endpoints">Making requests to active storage endpoints<a class="headerlink" href="#making-requests-to-active-storage-endpoints" title="Permanent link">&para;</a></h3>
<p>Request authentication is implemented using <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic Auth</a> with the username and password consisting of your S3 Access Key ID and Secret Access Key, respectively. If provided, these credentials are then used internally to authenticate with the upstream S3 source using <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-auth-using-authorization-header.html">standard AWS authentication methods</a>. If no basic auth header is provided, an unauthenticated request will be made to S3.</p>
<p>A basic Python client is provided in <code>scripts/client.py</code>.
First install dependencies in a Python virtual environment:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a virtualenv</span>
python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>./venv
<span class="c1"># Activate the virtualenv</span>
<span class="nb">source</span><span class="w"> </span>./venv/bin/activate
<span class="c1"># Install dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>scripts/requirements.txt
</code></pre></div>
<p>Then use the client to make a request:
<div class="highlight"><pre><span></span><code>venv/bin/python<span class="w"> </span>./scripts/client.py<span class="w"> </span>sum<span class="w"> </span>--server<span class="w"> </span>http://localhost:8080<span class="w"> </span>--source<span class="w"> </span>http://localhost:9000<span class="w"> </span>--username<span class="w"> </span>minioadmin<span class="w"> </span>--password<span class="w"> </span>minioadmin<span class="w"> </span>--bucket<span class="w"> </span>sample-data<span class="w"> </span>--object<span class="w"> </span>data-uint32.dat<span class="w"> </span>--dtype<span class="w"> </span>uint32
</code></pre></div></p>
<hr />
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h2>
<h3 id="application-documentation">Application documentation<a class="headerlink" href="#application-documentation" title="Permanent link">&para;</a></h3>
<p>This documentation is built using <a href="https://www.mkdocs.org/">MkDocs</a> and hosted on <a href="https://stackhpc.github.io/reductionist-rs/">GitHub pages</a>.
The configuration file is <a href="https://github.com/stackhpc/reductionist-rs/blob/main/mkdocs.yml">mkdocs.yml</a>, and documentation Markdown source is in <a href="https://github.com/stackhpc/reductionist-rs/blob/main/docs">docs/</a>.
GitHub Actions workflows build the documentation in pull requests, and deploy it to GitHub pages on pushes to <code>main</code>.</p>
<p>To build and serve the documentation locally at <a href="http://127.0.0.1:8000/reductionist-rs">http://127.0.0.1:8000/reductionist-rs</a>:
<div class="highlight"><pre><span></span><code>python3 -m venv mkdocs-venv
source mkdocs-venv/bin/activate
pip install -U pip
pip install -r docs-requirements.txt
mkdocs serve --strict
</code></pre></div></p>
<h3 id="source-code-documentation">Source code documentation<a class="headerlink" href="#source-code-documentation" title="Permanent link">&para;</a></h3>
<p>The source code is documented using <a href="https://doc.rust-lang.org/rustdoc/what-is-rustdoc.html">rustdoc</a>.
Documentation is available on <a href="https://docs.rs/reductionist/latest/reductionist/">docs.rs</a>.
It is also possible to build the documentation locally:</p>
<div class="highlight"><pre><span></span><code>cargo<span class="w"> </span>doc<span class="w"> </span>--no-deps
</code></pre></div>
<p>The resulting documentation is available under <code>target/doc</code>, and may be viewed in a web browser using file:///path/to/reductionist/target/doc/reductionist/index.html.</p>
<hr />
<h2 id="maintenance">Maintenance<a class="headerlink" href="#maintenance" title="Permanent link">&para;</a></h2>
<h3 id="updating-dependencies">Updating dependencies<a class="headerlink" href="#updating-dependencies" title="Permanent link">&para;</a></h3>
<p>Rust package dependencies are managed by <a href="https://doc.rust-lang.org/cargo/">Cargo</a>.
The <code>[dependencies]</code> section in <code>Cargo.toml</code> defines package dependencies and their version constraints.
The <code>[dev-dependencies]</code> section includes additional dependencies for testing.
In order to make builds reproducible, Cargo maintains a <code>Cargo.lock</code> file that captures the versions of all package dependencies.
This even allows for multiple versions of a package to be used by a single Rust application, although this can lead to incompatibilities at runtime and should be avoided if possible.</p>
<p>To update the versions in the <code>Cargo.lock</code> file, run <code>cargo update</code>, then inspect and commit the changes.</p>
<h3 id="updating-minimum-supported-rust-version-msrv">Updating Minimum Supported Rust Version (MSRV)<a class="headerlink" href="#updating-minimum-supported-rust-version-msrv" title="Permanent link">&para;</a></h3>
<p>Rust moves quickly, and it's sensible to keep up with the latest toolchain.
With support for multiple installed versions of Rust and the separation provided by containers there is little reason to support old versions of Rust.
The AWS SDK for Rust is particularly aggressive in updating its MSRV, and this often drives the MSRV of Reductionist.
Updating the Reductionist MSRV requires making changes in a few places.</p>
<ol>
<li><code>rust-version</code> in <code>Cargo.toml</code></li>
<li><code>FROM rust:&lt;version&gt;</code> in <code>Dockerfile</code></li>
<li><code>toolchain</code> in <code>.github/workflows/publish.yml</code></li>
<li>Prerequisites section in <code>docs/contributing.md</code></li>
</ol>
<p>Updating the MSRV typically requires a few updates to the code to handle changes in the standard library, Clippy rules, etc.</p>
<h3 id="create-a-release">Create a release<a class="headerlink" href="#create-a-release" title="Permanent link">&para;</a></h3>
<p>To update the version of Reductionist, set <code>[package] version</code> in <code>Cargo.toml</code>.
Create a pull request, approve and merge it.
When ready to release, <a href="https://github.com/stackhpc/reductionist-rs/releases/new">draft a new release</a> in GitHub, creating a new tag matching Reductionist's version, and auto-generating release notes.</p>
<p>After the release is published, the <a href="https://github.com/stackhpc/reductionist-rs/blob/main/.github/workflows/publish.yml">publish.yml</a> workflow will be triggered.
This workflow publishes the crate to crates.io, and builds then publishes a container image on GHCR.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../architecture/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Architecture" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Architecture
            </div>
          </div>
        </a>
      
      
        
        <a href="../pyactivestorage/" class="md-footer__link md-footer__link--next" aria-label="Next: PyActiveStorage Integration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              PyActiveStorage Integration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>